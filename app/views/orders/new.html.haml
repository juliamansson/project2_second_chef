%h1 Place order

%br

.row
  .col-xs-3
    %p.pull-right
      %b Meal
  .col-xs-9
    %p= link_to @order.meal.name, @order.meal if can? :read, @order.meal

.row
  .col-xs-3
    %p.pull-right
      %b Chef
  .col-xs-9
    %p= link_to @order.meal.user.chef_name, @order.meal.user if can? :read, @order.meal.user

.row
  .col-xs-3
    %p.pull-right
      %b Address
  .col-xs-9
    %p= @order.meal.user.address

%br

= simple_form_for([@order.meal, @order], html: { class: 'form-horizontal' }, wrapper: :horizontal_form) do |f|

  - if @order.errors.any?
    #error_explanation
      %h2= "#{pluralize(@order.errors.count, "error")} prohibited this order from being saved:"
      %ul
        - @order.errors.full_messages.each do |msg|
          %li= msg

  = f.input :fetch_at
  = f.input :comments

  .row
    .col-xs-3
      %p.pull-right
        %b Quantity
    .col-xs-9
      %p= "#{@order.meal.quantity} portions available"

  .row
    .col-xs-3
      %p.pull-right
        %b Price
    .col-xs-9
      %p= number_to_currency(@order.meal.price, unit: "£")


  = f.input :quantity, collection: 1..@order.meal.quantity, prompt: "Select quantity"

  #hiddenprice= @order.meal.price

  .row
    .col-xs-3
      %p.pull-right
        %b Total
    .col-xs-9
      %p
        %b
          %span#totalshow £...

  = f.input :credit_card_name
  = f.input :credit_card_number
  = f.input :credit_card_expiry

  = f.hidden_field :meal_id
  = f.hidden_field :price
  = f.button :submit
